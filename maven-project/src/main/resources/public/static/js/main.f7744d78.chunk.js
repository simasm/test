(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{35:function(e,t,a){e.exports=a(71)},41:function(e,t,a){},42:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);a(36);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),s=(a(41),a(5)),i=(a(42),a(2)),o=a.n(i),u=a(6),m=a(12),d=a(4),p=a.n(d),v=function(e){var t=Object(n.useContext)(P),a=t.appState,c=t.setAppState,l=Object(n.useState)(""),i=Object(s.a)(l,2),d=i[0],v=i[1],E=Object(n.useState)({cart:[]}),b=Object(s.a)(E,2),f=b[0],y=b[1];Object(n.useEffect)((function(){c({username:d.user,cart:f.cart})}),[f,d]);var N=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/maven-project/api/users",{username:d.user});case 2:return e.sent,e.next=5,p.a.get("/maven-project"+"/api/carts/".concat(d.user));case 5:null!==(t=e.sent).data?y({cart:t.data}):y({cart:[]});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("nav",{className:"navbar navbar-dark navbar-expand-lg bg-dark"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-brand"},"E-shop "),r.a.createElement("ul",{className:"navbar-nav me-auto mb-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/",style:{color:"white"},className:"text-decoration-none"},r.a.createElement("button",{className:"btn btn-secondary m-2"},"Home"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/cart/",style:{color:"white"},className:"text-decoration-none"},r.a.createElement("button",{className:"btn btn-secondary m-2"},"Cart"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/admin",style:{color:"white"},className:"text-decoration-none"},r.a.createElement("button",{className:"btn btn-secondary m-2"},"Admin")))),r.a.createElement("span",{style:{color:"white"},className:"text m-2"},"Logged in as ",a.username),r.a.createElement("form",{onSubmit:function(e){N(),e.preventDefault()}},r.a.createElement("div",{className:"d-flex align-self-end input-group w-auto"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"User name","aria-label":"Login",onChange:function(e){v({user:e.target.value}),e.preventDefault()}}),r.a.createElement("input",{type:"submit",value:"login"})))))},E=a(31),b=a(32),f=a(34),y=a(33),N=(a(70),function(e){return onclick=function(){},e.viewMode?r.a.createElement(m.b,{to:"/".concat(e.id),style:{color:"white"},className:"text-decoration-none"},r.a.createElement("button",{className:"btn btn-secondary",onClick:onclick},"Details")):r.a.createElement(r.a.Fragment,null," ")}),h=a(11),j=function(e){var t=Object(n.useContext)(P),a=t.appState,c=t.setAppState,l=Object(n.useState)({cart:[]}),i=Object(s.a)(l,2),m=i[0],d=i[1];Object(n.useEffect)((function(){c(Object(h.a)(Object(h.a)({},a),{},{cart:a.cart.concat(m.cart)}))}),[m]);var v=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/maven-project/api/carts",a);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"btn btn-secondary m-2",onClick:function(){d({cart:[e.id]}),v()}},"Add to cart")},g=function(e){Object(f.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).cardClick=function(){},n.state={key:n.props.key,id:n.props.id,cardTitle:n.props.title,cardPrice:n.props.price,cardQuantity:n.props.quantity,imageUrl:n.props.imgUrl,cardDesc:n.props.desc,buttonTitle:"Details",viewMode:n.props.viewMode},n}return Object(b.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card m-2",style:{width:"18rem"}},r.a.createElement("img",{src:this.state.imageUrl,className:"card-img-top",alt:"..."}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},this.state.cardTitle),r.a.createElement("p",{className:"card-text"},r.a.createElement("span",null,"Price ",this.state.cardPrice," "),r.a.createElement("span",null,"Quantity ",this.state.cardQuantity," "),r.a.createElement("span",null," ",this.state.cardDesc," ")),r.a.createElement(N,{viewMode:this.props.viewMode,id:this.state.id}),r.a.createElement(j,{id:this.state.id})))}}]),a}(n.Component),O=a(1),w=function(){var e=Object(O.f)().id,t="https://media.karousell.com/media/photos/products/2020/01/23/samsung_basic_keypad_phone_1579753834_f597a219_progressive.jpg";void 0===e&&(e=0);var a=Object(n.useState)({products_array:null}),c=Object(s.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){setTimeout(function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/maven-project/api/products");case 2:t=e.sent,a=t.data,i({products_array:a});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),1500)}),[]),null===l.products_array?r.a.createElement("div",null,"Loading..."):0===e?r.a.createElement("div",{className:"row"},l.products_array.map((function(e){return r.a.createElement(g,{key:e.id,id:e.id,title:e.title,price:e.price,quantity:e.quantity,desc:e.description,viewMode:!0,imgUrl:t})}))):r.a.createElement("div",{className:"row justify-content-center"},l.products_array.filter((function(t){return t.id==e})).map((function(e){return r.a.createElement(g,{key:e.id,id:e.id,title:e.title,price:e.price,quantity:e.quantity,desc:e.description,viewMode:!1,imgUrl:t})})))},x=function(){var e=Object(n.useContext)(P).appState,t=Object(n.useState)({products_array:null}),a=Object(s.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){setTimeout(function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/maven-project/api/products");case 2:t=e.sent,a=t.data,l({products_array:a});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),1500)}),[]);return null!==c.products_array?r.a.createElement("div",null,"cart ",e.username," \xa0 ",r.a.createElement("ol",{className:"conainer   "},r.a.createElement("li",{className:"row bg-dark",style:{color:"white"}},r.a.createElement("div",{className:"col border "},"id"),r.a.createElement("div",{className:"col border "},"title"),r.a.createElement("div",{className:"col  border"},"price"),r.a.createElement("div",{className:"col border "},"quantity"),r.a.createElement("div",{className:"col border"},"action")),JSON.stringify(e.cart))):r.a.createElement(r.a.Fragment,null)},k=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",{className:"text-center text-lg-start bg-light"},r.a.createElement("section",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"me-5 d-none d-lg-block"},"footer")),r.a.createElement("div",{className:"text-center p-4",style:{backgroundcolor:"grey"}},"\xa9 2021")))},S=function(){var e=Object(n.useContext)(_),t=e.productList,a=e.loadProducts,c=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("/maven-project"+"/api/products/".concat(t));case 2:e.sent.status<400&&a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!==t.products_array?r.a.createElement("ol",{className:"conainer   "},r.a.createElement("li",{className:"row bg-dark",style:{color:"white"}},r.a.createElement("div",{className:"col border "},"id"),r.a.createElement("div",{className:"col border "},"title"),r.a.createElement("div",{className:"col  border"},"price"),r.a.createElement("div",{className:"col border "},"quantity"),r.a.createElement("div",{className:"col border"},"action")),t.products_array.map((function(e){return r.a.createElement("li",{className:"row justify-content-evenly bg-light",key:e.id},r.a.createElement("div",{className:"col m-2 "},e.id," "),r.a.createElement("div",{className:"col m-2"},e.title,"    "),r.a.createElement("div",{className:"col m-2"},e.price,"   "),r.a.createElement("div",{className:"col m-2"},e.quantity,"   "),r.a.createElement("div",{className:"col btn m-2 btn-secondary btn-sm",onClick:function(){return c(e.id)}},"Delete"))}))):r.a.createElement(r.a.Fragment,null," loading...")},C=function(){var e=Object(n.useState)({title:"",price:"",quantity:""}),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(_).loadProducts,i=function(e){switch(e.target.name){case"title":c(Object(h.a)(Object(h.a)({},a),{},{title:e.target.value}));break;case"price":c(Object(h.a)(Object(h.a)({},a),{},{price:e.target.value}));break;case"quantity":c(Object(h.a)(Object(h.a)({},a),{},{quantity:e.target.value}))}},m=function(){return null!==(a.price.match(/^([0-9]+\.?[0-9]*|\.[0-9]+)$/)&&a.quantity.match(/^[0-9]+$/))},d=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/maven-project/api/products",a);case 2:e.sent.status<400&&l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:function(e){m()?(d(),e.preventDefault()):alert("invalid product details"),e.preventDefault()}},r.a.createElement("div",{className:"row bg-dark",style:{color:"white"}},r.a.createElement("h4",null,"Add product ")),r.a.createElement("div",{className:"row pt-2"},r.a.createElement("div",{className:"col-5-lg"},r.a.createElement("span",{className:"m-2"},"Title"),r.a.createElement("input",{className:"col-5-lg",type:"text",name:"title",placeholder:"title",onChange:i}))),r.a.createElement("div",{className:"row pt-2"},r.a.createElement("div",{className:"col"},r.a.createElement("span",{className:"m-2"},"Price"),r.a.createElement("input",{className:"col",type:"text",name:"price",placeholder:"price",onChange:i}))),r.a.createElement("div",{className:"row pt-2"},r.a.createElement("div",{className:"col"},r.a.createElement("span",{className:"m-2"},"Quantity"),r.a.createElement("input",{className:"col",type:"text",name:"quantity",placeholder:"quantity",onChange:i}))),r.a.createElement("input",{type:"submit",value:"Submit"}))},_=r.a.createContext({}),q=function(){var e=Object(n.useState)({products_array:null}),t=Object(s.a)(e,2),a=t[0],c=t[1],l=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("api/products");case 2:t=e.sent,a=t.data,c({products_array:a});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),r.a.createElement(_.Provider,{value:{productList:a,setProductList:c,loadProducts:l}},r.a.createElement("div",{className:"container pt-2 "},r.a.createElement("div",{className:"row justify-content-evenly  "},r.a.createElement("div",{className:"col-7  "},r.a.createElement(S,null)),r.a.createElement("div",{className:"col-4  "},r.a.createElement(C,null)))))},P=r.a.createContext({}),D=function(){var e=Object(n.useState)({username:"",cart:[]}),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"container"},r.a.createElement(P.Provider,{value:{appState:a,setAppState:c}},r.a.createElement(m.a,{basename:"/maven-project"},r.a.createElement(v,null),r.a.createElement(O.c,null,r.a.createElement(O.a,{exact:!0,path:"/"},r.a.createElement(w,null)),r.a.createElement(O.a,{path:"/cart"},r.a.createElement(x,null)),r.a.createElement(O.a,{path:"/cart/:user"},r.a.createElement(x,null)),r.a.createElement(O.a,{path:"/admin"},r.a.createElement(q,null)),r.a.createElement(O.a,{path:"/:id"},r.a.createElement(w,null))),r.a.createElement(k,null))))},F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,72)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),c(e),l(e)}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),F()}},[[35,1,2]]]);
//# sourceMappingURL=main.f7744d78.chunk.js.map